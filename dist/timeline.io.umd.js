(()=>{var C=Object.defineProperty;var p=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var D=(l,e,t)=>e in l?C(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,v=(l,e)=>{for(var t in e||(e={}))E.call(e,t)&&D(l,t,e[t]);if(p)for(var t of p(e))L.call(e,t)&&D(l,t,e[t]);return l};var c=class{constructor(e,t,n){if(!e)throw new Error("Element argument is empty. Please add DOM element | selector as first arg");if(typeof e=="string"){let s=document.querySelector(e);if(!s)throw new Error(`Selector could not be found [${e}]`);this.element=s}e instanceof Element&&(this.element=e),this.options=v({labelCount:5,zoomSpeed:.025,dragSpeed:.003,startDate:"-100y",endDate:"10y",timelineStartDate:"-1000y",timelineEndDate:"1000y",minZoom:1,maxZoom:1e11,position:"bottom"},t),this.timelineStart=this.parseDate(this.options.timelineStartDate),this.timelineEnd=this.parseDate(this.options.timelineEndDate);let r=this.parseDate(this.options.startDate),i=this.parseDate(this.options.endDate);r.getTime()<this.timelineStart.getTime()&&(this.timelineStart=r),i.getTime()>this.timelineEnd.getTime()&&(this.timelineEnd=i);let a=i.getTime()-r.getTime();this.ratio=this.timelineDuration/a,this.pivot=(this.timelineStart.getTime()-r.getTime())/a,this.setupHTML(),this.registerListeners(this.element),this.callback=n,this.update()}get timelineDuration(){return this.timelineEnd.getTime()-this.timelineStart.getTime()}get viewWidth(){var e;return((e=this.element)==null?void 0:e.offsetWidth)||0}get start(){return this.timelineStart.getTime()-this.duration*this.pivot}get end(){return this.start+this.duration}get duration(){return this.timelineDuration/this.ratio}get startDate(){return new Date(this.start)}get endDate(){return new Date(this.end)}setRatio(e,t){let n=this.ratio-t;return e===1&&n<=this.options.minZoom||e===-1&&n>=this.options.maxZoom?!1:(this.ratio=n,!0)}setPivot(e){let t=this.pivot+e;t>=0&&(t=0),t+this.ratio<=1&&(t=1-this.ratio),this.pivot=t}zoom(e,t){let n=this.options.zoomSpeed*this.ratio,r=e*n,s=((t||0)/this.viewWidth-this.pivot)/this.ratio*r;this.setRatio(e,r)&&this.setPivot(s),this.update()}move(e){this.setPivot(e),this.update()}registerListeners(e){let t=this;window.addEventListener("resize",function(){t.update()},{passive:!0}),e.addEventListener("wheel",function(s){s.preventDefault();var d=Math.sign(s.deltaY);t.zoom(d,s.offsetX)},{passive:!1});let n,r,i=!1,a=!0;e.addEventListener("mousedown",function(s){i=!0,n=s.pageX,r=s.pageY},{passive:!1}),e.addEventListener("mousemove",function(s){if(!i||!a)return;a=!1;let d=(s.pageX-n)*t.options.dragSpeed;t.move(d),n=s.pageX,r=s.pageY,setTimeout(()=>a=!0,10)},{passive:!1}),document.addEventListener("mouseup",function(){i=!1},{passive:!1})}setupHTML(){this.element.querySelectorAll(".timelineEvent").forEach(r=>{let i=r,a=i.getAttribute("startdate");if(a){let s=this.parseDateString(a);this.element.addEventListener("update",d=>{let u=d.detail.getLeftRatio(s.getTime()),h=u>0&&u<1;i.style.display=h?"block":"none",h&&(i.style.left=u*100+"%")})}i.style.width="5px",i.style.height="5px",i.style.border="solid 1px black",i.style.borderRadius="50%",i.style.position="absolute",i.style.bottom="4rem"}),this.element.style.position="relative",this.element.style.overflow="hidden",this.element.style.minHeight="3rem";let t=this.element.querySelector(".timelineLabelContainer");switch(this.labelContainer=t||document.createElement("div"),this.labelContainer.className="timelineLabelContainer",this.labelContainer.style.width="100%",this.labelContainer.style.height="3rem",this.labelContainer.style.textAlign="center",this.labelContainer.style.position="absolute",this.labelContainer.style.zIndex="-1",this.options.position){case"top":this.labelContainer.style.top="0";break;case"center":this.labelContainer.style.top="50%",this.labelContainer.style.transform="translate(0, calc(-50%))";break;default:this.labelContainer.style.bottom="0"}t||this.element.appendChild(this.labelContainer);let n=this.element.querySelector(".timelineDividerContainer");this.dividerContainer=n||document.createElement("div"),this.dividerContainer.className="timelineDividerContainer",this.dividerContainer.style.width="100%",this.dividerContainer.style.height="100%",this.dividerContainer.style.position="absolute",this.dividerContainer.style.zIndex="-10",n||this.element.appendChild(this.dividerContainer)}format(e){let t=new Date(e);return this.duration<1440*6e5*4?Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}).format(t):this.duration<10080*6e5*6?Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}).format(t):this.duration<43829.0639*6e5*18?Intl.DateTimeFormat(void 0,{year:"numeric",month:"short"}).format(t):t.getFullYear().toString()}update(){if(!this.element)return;let e=Math.floor(this.ratio),t=Math.pow(2,Math.floor(Math.log2(e))),n=1/(this.options.labelCount+1),r=this.start-this.timelineStart.getTime(),a=this.timelineDuration*n/t,d=Math.floor(r/a)*a,u=document.createDocumentFragment(),h=document.createDocumentFragment();for(let f=0;f<this.options.labelCount+2;f++){let b=(f+1)*a+this.timelineStart.getTime()+d-a,y=b+a/2,w=this.toJSON().getLeftRatio(b)*100,T=this.toJSON().getLeftRatio(y)*100,o=document.createElement("div");o.className="timelineLabel",o.style.left=w+"%",o.style.top="50%",o.style.transform="translate(calc(-50%), calc(-50%))",o.style.textAlign="center",o.style.position="absolute",o.style.zIndex="-1",o.style.width=n*100+"%",o.innerHTML=this.format(b),u.appendChild(o);let m=document.createElement("div");m.className="timelineDivider",m.style.left=T+"%",m.style.textAlign="center",m.style.position="absolute",m.style.height="100%",m.style.zIndex="-10",m.innerHTML="",h.appendChild(m)}this.labelContainer.innerHTML="",this.labelContainer.appendChild(u),this.dividerContainer.innerHTML="",this.dividerContainer.appendChild(h);let g=new CustomEvent("update",{detail:this.toJSON(),bubbles:!0,cancelable:!0,composed:!1});this.element.dispatchEvent(g),this.callback&&this.callback(this)}parseDate(e){if(e===void 0)return new Date;if(Array.isArray(e)){let t=e;if(t.length===0)throw new Error("argument Array cannot be empty");if(!t.every(r=>typeof r=="number"))throw new Error("input Array must contain only numbers");return this.parseDateArray(t)}if(typeof e=="object"&&e.constructor.name==="Date")return e;if(typeof e=="string")return this.parseDateString(e);if(typeof e=="number")return new Date(e)}parseDateArray(e){let t=new Date;return t.setFullYear(e[0]||t.getFullYear()),t.setMonth(e[1]?e[1]-1:0),t.setDate(e[2]?e[2]:1),t.setHours(e[3]?e[3]:0),t.setMinutes(e[4]?e[4]:0),t}parseDateString(e){switch(e){case"now":return new Date;case"max":return new Date(864e13);case"min":return new Date(-864e13);default:let t=Number(e.replace(/y$/,""));if(!isNaN(t))return new Date(Date.now()+31556926*1e3*t);let n=new Date("0001-01-01"),r=Number(e.replace(/bc$/,""));if(!isNaN(r))return new Date(n.getTime()-31556926*1e3*r);let i=Number(e.replace(/ad$/,""));return isNaN(i)?new Date(e):new Date(n.getTime()+31556926*1e3*i)}}toJSON(){return{options:this.options,startDate:this.startDate,endDate:this.endDate,duration:this.duration,ratio:this.ratio,pivot:this.pivot,getLeftRatio:e=>(e-this.startDate.getTime())/this.duration}}};window.Timeline=c;})();
